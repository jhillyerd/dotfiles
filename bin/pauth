#!/usr/bin/env python2
# pauth
# description: Authenticate to proxy server
import os, urllib2, urllib, getpass

proxy_host = os.environ['http_proxy']
user = os.environ['USER']

print("Enter credentials for %s" % user)
password = getpass.getpass("Password: ")

proxy_url = 'http://%s:%s@%s' % (user, urllib.quote(password, safe=''), proxy_host)
proxy = urllib2.ProxyHandler({'http': proxy_url})
auth = urllib2.HTTPBasicAuthHandler()
opener = urllib2.build_opener(proxy, auth, urllib2.HTTPHandler)
urllib2.install_opener(opener)

conn = urllib2.urlopen('http://www.woot.com')
return_str = conn.read()
